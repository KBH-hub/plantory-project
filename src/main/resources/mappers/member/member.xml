<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zero.plantory.domain.member.mapper.MemberMapper">

    <select id="countByMembername" resultType="int">
        SELECT COUNT(*)
        FROM member
        WHERE membername = #{membername}
          AND del_flag IS NULL
    </select>

    <select id="countByNickname" resultType="int">
        SELECT COUNT(*)
        FROM member
        WHERE nickname = #{nickname}
          AND del_flag IS NULL
    </select>

    <insert id="insertMember" parameterType="com.zero.plantory.global.vo.MemberVO">
        INSERT INTO member (
            membername, password, nickname, phone, address,
            sharing_rate, skill_rate, management_rate,
            role, stop_day, del_flag, created_at, notice_enabled
        )
        VALUES (
                   #{membername}, #{password}, #{nickname},
                   #{phone}, #{address},
                   #{sharingRate}, #{skillRate}, #{managementRate},
                   #{role}, #{stopDay}, #{delFlag},
                   NOW(), #{noticeEnabled}
               )
    </insert>

    <select id="selectByMembername" resultType="com.zero.plantory.global.vo.MemberVO">
        SELECT member_id, membername, password, nickname, phone, address,
               sharing_rate, skill_rate, management_rate,
               role, stop_day, del_flag
        FROM member
        WHERE membername = #{membername}
          AND del_flag IS NULL
    </select>

</mapper>
